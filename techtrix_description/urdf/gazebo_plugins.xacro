<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="techtrix_robot">

  <!-- contact sensors for suction cups -->
  <gazebo reference="grabbing_mechanism">
    <sensor name='grabber_contact_sensor_sc_1_top' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_1_top_collision</collision>
      </contact>
      <plugin name="contact_plugin_sc_1_top" filename="libGrabberContactPlugin.so">
        <collision_x>0.551</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.135</collision_z>
        <marker_publish>sc_1_top</marker_publish>
        <marker_id>1</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_1_bot' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_1_bot_collision_1</collision>
      </contact>
      <plugin name="contact_plugin_sc_1_bot" filename="libGrabberContactPlugin.so">
        <collision_x>0.551</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.255</collision_z>
        <marker_publish>sc_1_bot</marker_publish>
        <marker_id>2</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_2_top' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_2_top_collision_2</collision>
      </contact>
      <plugin name="contact_plugin_sc_2_top" filename="libGrabberContactPlugin.so">
        <collision_x>0.339</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.135</collision_z>
        <marker_publish>sc_2_top</marker_publish>
        <marker_id>3</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_2_bot' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_2_bot_collision_3</collision>
      </contact>
      <plugin name="contact_plugin_sc_2_bot" filename="libGrabberContactPlugin.so">
        <collision_x>0.339</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.255</collision_z>
        <marker_publish>sc_2_bot</marker_publish>
        <marker_id>4</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_3_top' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_3_top_collision_4</collision>
      </contact>
      <plugin name="contact_plugin_sc_3_top" filename="libGrabberContactPlugin.so">
        <collision_x>0.127</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.135</collision_z>   
        <marker_publish>sc_3_top</marker_publish>
        <marker_id>5</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_3_bot' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_3_bot_collision_5</collision>
      </contact>
      <plugin name="contact_plugin_sc_3_bot" filename="libGrabberContactPlugin.so">
        <collision_x>0.127</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.255</collision_z>
        <marker_publish>sc_3_bot</marker_publish>
        <marker_id>6</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_4_top' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_4_top_collision_6</collision>
      </contact>
      <plugin name="contact_plugin_sc_4_top" filename="libGrabberContactPlugin.so">
        <collision_x>-0.127</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.135</collision_z>
        <marker_publish>sc_4_top</marker_publish>
        <marker_id>7</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_4_bot' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_4_bot_collision_7</collision>
      </contact>
      <plugin name="contact_plugin_sc_4_bot" filename="libGrabberContactPlugin.so">
        <collision_x>-0.127</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.255</collision_z>
        <marker_publish>sc_4_bot</marker_publish>
        <marker_id>8</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_5_top' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_5_top_collision_8</collision>
      </contact>
      <plugin name="contact_plugin_sc_5_top" filename="libGrabberContactPlugin.so">
        <collision_x>-0.339</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.135</collision_z>
        <marker_publish>sc_5_top</marker_publish>
        <marker_id>9</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_5_bot' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_5_bot_collision_9</collision>
      </contact>
      <plugin name="contact_plugin_sc_5_bot" filename="libGrabberContactPlugin.so">
        <collision_x>-0.339</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.255</collision_z>
        <marker_publish>sc_5_bot</marker_publish>
        <marker_id>10</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_6_top' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_6_top_collision_10</collision>
      </contact>
      <plugin name="contact_plugin_sc_6_top" filename="libGrabberContactPlugin.so">
        <collision_x>-0.551</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.135</collision_z>
        <marker_publish>sc_6_top</marker_publish>
        <marker_id>11</marker_id>
      </plugin>
    </sensor>
    <sensor name='grabber_contact_sensor_sc_6_bot' type='contact'>
      <always_on>true</always_on> 
      <update_rate>300</update_rate> 
      <contact>
        <collision>grabbing_mechanism_sc_6_bot_collision_11</collision>
      </contact>
      <plugin name="contact_plugin_sc_6_bot" filename="libGrabberContactPlugin.so">
        <collision_x>-0.551</collision_x>
        <collision_y>-0.098</collision_y>
        <collision_z>-0.255</collision_z>
        <marker_publish>sc_6_bot</marker_publish>
        <marker_id>12</marker_id>
      </plugin>
    </sensor>
  </gazebo>

  <!-- lasers for the grabber -->
  <gazebo reference="grabbing_mechanism_sc_1_laser">
    <sensor type="ray" name="sc_1_laser">
      <visualize>true</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>10</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin name="sc_1_laser_controller" filename="libgazebo_ros_laser.so">
        <robotNamespace>techtrix</robotNamespace>
        <topicName>/techtrix/laser/sc_1</topicName>
        <frameName>grabbing_mechanism_sc_1_laser</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="grabbing_mechanism_sc_2_laser">
    <sensor type="ray" name="sc_2_laser">
      <visualize>true</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>10</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin name="sc_2_laser_controller" filename="libgazebo_ros_laser.so">
        <robotNamespace>techtrix</robotNamespace>
        <topicName>/techtrix/laser/sc_2</topicName>
        <frameName>grabbing_mechanism_sc_2_laser</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="grabbing_mechanism_sc_3_laser">
    <sensor type="ray" name="sc_3_laser">
      <visualize>true</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>10</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin name="sc_3_laser_controller" filename="libgazebo_ros_laser.so">
        <robotNamespace>techtrix</robotNamespace>
        <topicName>/techtrix/laser/sc_3</topicName>
        <frameName>grabbing_mechanism_sc_3_laser</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="grabbing_mechanism_sc_4_laser">
    <sensor type="ray" name="sc_4_laser">
      <visualize>true</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>10</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin name="sc_4_laser_controller" filename="libgazebo_ros_laser.so">
        <robotNamespace>techtrix</robotNamespace>
        <topicName>/techtrix/laser/sc_4</topicName>
        <frameName>grabbing_mechanism_sc_4_laser</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="grabbing_mechanism_sc_5_laser">
    <sensor type="ray" name="sc_5_laser">
      <visualize>true</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>10</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin name="sc_5_laser_controller" filename="libgazebo_ros_laser.so">
        <robotNamespace>techtrix</robotNamespace>
        <topicName>/techtrix/laser/sc_5</topicName>
        <frameName>grabbing_mechanism_sc_5_laser</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="grabbing_mechanism_sc_6_laser">
    <sensor type="ray" name="sc_6_laser">
      <visualize>true</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>10</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>30.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin name="sc_6_laser_controller" filename="libgazebo_ros_laser.so">
        <robotNamespace>techtrix</robotNamespace>
        <topicName>/techtrix/laser/sc_6</topicName>
        <frameName>grabbing_mechanism_sc_6_laser</frameName>
      </plugin>
    </sensor>
  </gazebo>

  <!-- camera -->
  <gazebo reference="camera_link"> <!--The link name must match the link name of the URDF model -->
    <sensor type="camera" name="camera1"> <!-- The name "camera1" must be unique from all other sensors -->
      <update_rate>30.0</update_rate> <!-- Number of times per second a new camera image is taken within Gazebo -->
                                      <!-- This is the maximum update rate the sensor will attempt during simulation 
                                           but it could fall behind this target rate if the physics simulation runs 
                                           faster than the sensor generation can keep up.-->
      <!-- Next, we set upp the manufacturer;s spects of our physical camera hardware -->
      <!-- Note that the pixels are assumed to be square -->
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>800</width>
          <height>800</height>
          <format>R8G8B8</format>
        </image>
        <!-- The near and far clips are simulation-specific 
             parameters that give an upper and lower bound to the distance
             in which the cameras can see objects in the simulation.
             This is specified in the camera's optometry frame. -->
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <!-- Noise is sampled independently per pixel on each frame.
               That pixel's noise value is added to each of its color
               channels, which at that point lie in the range [0,1]. -->
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <!-- This is where the actual gazebo_ros/gazebo_ros_camera.cpp file is linked to, as a shared object -->
      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <!-- We define the rostopic the camera will be publishing to, for both the image topic and the camera info topic -->
        <cameraName>techtrix/camera1</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <!-- Hence, for techtrix robot, you should subscribe to:
             /techtrix/camera1/image_raw
             /techtrix/camera1/camera_info-->
        <!-- Finally, we set the coordinate frame the image 
             is published under in the tf tree.-->
        <frameName>camera_link</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>

      <!-- <plugin name="gazebo_light_sensor_plugin" filename="libgazebo_light_sensor_plugin.so">
         <cameraName>techtrix/camera1</cameraName>
         <alwaysOn>true</alwaysOn>
         <updateRate>0.0</updateRate>
         <imageTopicName>image_raw</imageTopicName>
         <depthImageTopicName>depth/image_raw</depthImageTopicName>
         <pointCloudTopicName>depth/points</pointCloudTopicName>
         <cameraInfoTopicName>camera_info</cameraInfoTopicName>
         <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName>
         <frameName>camera_link</frameName>
         <hackBaseline>0.07</hackBaseline>
         <distortionK1>0.0</distortionK1>
         <distortionK2>0.0</distortionK2>
         <distortionK3>0.0</distortionK3>
         <distortionT1>0.0</distortionT1>
         <distortionT2>0.0</distortionT2>
         <pointCloudCutoff>0.4</pointCloudCutoff>
         <robotNamespace>/</robotNamespace>
       </plugin> -->

       <plugin name="gazebo_thermal_sensor_plugin" filename="libgazebo_thermal_sensor_plugin.so">
         <cameraName>techtrix/thermal1</cameraName>
         <alwaysOn>true</alwaysOn>
         <updateRate>0.0</updateRate>
         <imageTopicName>image_raw</imageTopicName>
         <depthImageTopicName>depth/image_raw</depthImageTopicName>
         <pointCloudTopicName>depth/points</pointCloudTopicName>
         <cameraInfoTopicName>camera_info</cameraInfoTopicName>
         <depthImageCameraInfoTopicName>depth/camera_info</depthImageCameraInfoTopicName>
         <frameName>camera_link</frameName>
         <robotNamespace>/</robotNamespace>
       </plugin>

       <controller type="gazebo_ros_thermal_camera" name="thermal_camera_controller" plugin="libgazebo_ros_thermal_depth_camera.so">
          <alwaysOn>true</alwaysOn>
          <updateRate>10</updateRate>
          <imageTopicName>/thermal_camera/image_raw</imageTopicName>
          <cameraInfoTopicName>/thermal_camera/camera_info</cameraInfoTopicName>
          <frameName>thermal_optical_frame</frameName>
          <interface type="camera" name="thermal_camera_iface" />
        </controller>
    </sensor>
  </gazebo>
</robot>